(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c0b427c0"],{2882:function(e,a,s){"use strict";s.r(a);var n=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"获取数据中"}},[s("div",{staticClass:"handle-box"},[s("div",{staticClass:"btn"},[s("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("添加角色")])],1)]),s("el-table",{attrs:{data:e.tableData,border:"","header-cell-style":{background:"#f0f0f0",color:"#2a9f93"},"max-height":"620"}},[s("el-table-column",{attrs:{prop:"id",label:"ID"}}),s("el-table-column",{attrs:{prop:"name",label:"角色名"}}),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){return e.handleEdit(a.$index,a.row)}}},[e._v("编辑权限")]),s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(s){return e.handleDel(a.$index,a.row)}}},[e._v("删除")])]}}])})],1),s("el-dialog",{attrs:{visible:e.dialogDel,title:"删除角色",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(a){e.dialogDel=a}}},[s("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否删除该角色")]),s("span",[s("el-button",{attrs:{type:"primary"},on:{click:e.toDel}},[e._v("删除")]),s("el-button",{attrs:{type:"danger"},on:{click:function(a){e.dialogDel=!1}}},[e._v("取消")])],1)]),s("div",{staticClass:"block"},[s("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,50,100,150,200,250,300],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(a){e.current=a},"update:current-page":function(a){e.current=a},"size-change":e.sizeChange}})],1),s("el-dialog",{attrs:{title:"添加角色",visible:e.dialogRole,width:"90%","close-on-click-modal":!1},on:{"update:visible":function(a){e.dialogRole=a}}},[s("div",{staticClass:"box"},[s("el-form",{attrs:{model:e.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"角色名称"}},[s("el-input",{attrs:{placeholder:"请输入角色名",disabled:e.disabledRole},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1),s("el-form-item",{attrs:{label:"选择权限"}},[s("el-checkbox",{on:{change:e.AllChange},model:{value:e.checkAll,callback:function(a){e.checkAll=a},expression:"checkAll"}},[e._v("全选")]),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"overview",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("数据总览页")])])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"baiduaip",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("百度接口管理页")])]),s("el-checkbox",{attrs:{label:"baiduaipAdd"},on:{change:e.oneChange}},[e._v("添加百度接口")]),s("el-checkbox",{attrs:{label:"baiduaipGet"},on:{change:e.oneChange}},[e._v("获取百度接口数据")]),s("el-checkbox",{attrs:{label:"baiduaipDel"},on:{change:e.oneChange}},[e._v("删除百度接口数据")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"project",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("项目管理页")])]),s("el-checkbox",{attrs:{label:"projectAdd"},on:{change:e.oneChange}},[e._v("添加项目")]),s("el-checkbox",{attrs:{label:"projectGet"},on:{change:e.oneChange}},[e._v("获取项目")]),s("el-checkbox",{attrs:{label:"projectDel"},on:{change:e.oneChange}},[e._v("删除项目")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"address",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("地址管理页")])]),s("el-checkbox",{attrs:{label:"addressList"},on:{change:e.oneChange}},[e._v("地址列表子页")]),s("el-checkbox",{attrs:{label:"areas"},on:{change:e.oneChange}},[e._v("地区管理子页")]),s("el-checkbox",{attrs:{label:"addressAdd"},on:{change:e.oneChange}},[e._v("添加地址")]),s("el-checkbox",{attrs:{label:"addressGet"},on:{change:e.oneChange}},[e._v("获取地址")]),s("el-checkbox",{attrs:{label:"addressDel"},on:{change:e.oneChange}},[e._v("删除地址")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"face",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("人脸管理页")])]),s("el-checkbox",{attrs:{label:"faceList"},on:{change:e.oneChange}},[e._v("人脸列表子页")]),s("el-checkbox",{attrs:{label:"pushLogs"},on:{change:e.oneChange}},[e._v("推送记录子页")]),s("el-checkbox",{attrs:{label:"faceAdd"},on:{change:e.oneChange}},[e._v("添加人脸")]),s("el-checkbox",{attrs:{label:"faceGet"},on:{change:e.oneChange}},[e._v("获取人脸")]),s("el-checkbox",{attrs:{label:"faceDel"},on:{change:e.oneChange}},[e._v("删除人脸")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"device",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("设备管理页")])]),s("el-checkbox",{attrs:{label:"deviceList"},on:{change:e.oneChange}},[e._v("设备列表子页")]),s("el-checkbox",{attrs:{label:"command"},on:{change:e.oneChange}},[e._v("指令管理子页")]),s("el-checkbox",{attrs:{label:"deviceAdd"},on:{change:e.oneChange}},[e._v("添加设备")]),s("el-checkbox",{attrs:{label:"deviceGet"},on:{change:e.oneChange}},[e._v("获取设备")]),s("el-checkbox",{attrs:{label:"deviceDel"},on:{change:e.oneChange}},[e._v("删除设备")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"package",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("包管理页")])]),s("el-checkbox",{attrs:{label:"apkAdd"},on:{change:e.oneChange}},[e._v("添加角色")]),s("el-checkbox",{attrs:{label:"apkGet"},on:{change:e.oneChange}},[e._v("获取角色列表")]),s("el-checkbox",{attrs:{label:"apkDel"},on:{change:e.oneChange}},[e._v("删除角色")])],1)],1),s("div",{staticClass:"permission",staticStyle:{"margin-left":"180px"}},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{attrs:{label:"apkVersionAdd"},on:{change:e.oneChange}},[e._v("添加版本")]),s("el-checkbox",{attrs:{label:"apkVersionSend"},on:{change:e.oneChange}},[e._v("发布版本")]),s("el-checkbox",{attrs:{label:"apkVersionDel"},on:{change:e.oneChange}},[e._v("删除版本")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"danger",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("可疑管理页")])]),s("el-checkbox",{attrs:{label:"doubtable"},on:{change:e.oneChange}},[e._v("可疑人脸子页")]),s("el-checkbox",{attrs:{label:"dangerlogs"},on:{change:e.oneChange}},[e._v("可疑日志子页")]),s("el-checkbox",{attrs:{label:"dangerAdd"},on:{change:e.oneChange}},[e._v("添加可疑")]),s("el-checkbox",{attrs:{label:"dangerGet"},on:{change:e.oneChange}},[e._v("获取可疑列表")]),s("el-checkbox",{attrs:{label:"dangerDel"},on:{change:e.oneChange}},[e._v("删除可疑")]),s("el-checkbox",{attrs:{label:"dangerLogGet"},on:{change:e.oneChange}},[e._v("获取可疑日志列表")]),s("el-checkbox",{attrs:{label:"dangerLogDel"},on:{change:e.oneChange}},[e._v("删除可疑日志")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"permission",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("权限管理页")])]),s("el-checkbox",{attrs:{label:"roles"},on:{change:e.oneChange}},[e._v("角色管理页")]),s("el-checkbox",{attrs:{label:"manage"},on:{change:e.oneChange}},[e._v("用户管理页")]),s("el-checkbox",{attrs:{label:"roleAdd"},on:{change:e.oneChange}},[e._v("添加角色")]),s("el-checkbox",{attrs:{label:"roleEdit"},on:{change:e.oneChange}},[e._v("编辑权限")]),s("el-checkbox",{attrs:{label:"roleGet"},on:{change:e.oneChange}},[e._v("获取角色列表")]),s("el-checkbox",{attrs:{label:"roleDel"},on:{change:e.oneChange}},[e._v("删除角色")])],1)],1),s("div",{staticClass:"permission",staticStyle:{"margin-left":"180px"}},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{attrs:{label:"manageAdd"},on:{change:e.oneChange}},[e._v("添加管理员")]),s("el-checkbox",{attrs:{label:"manageEdit"},on:{change:e.oneChange}},[e._v("编辑管理员")]),s("el-checkbox",{attrs:{label:"manageGet"},on:{change:e.oneChange}},[e._v("管理员列表")]),s("el-checkbox",{attrs:{label:"manageResetPwd"},on:{change:e.oneChange}},[e._v("重置密码")]),s("el-checkbox",{attrs:{label:"manageDel"},on:{change:e.oneChange}},[e._v("删除管理员")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"outInLogs",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("进出记录管理页")])])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"area",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("辖区管理页")])]),s("el-checkbox",{attrs:{label:"areaList"},on:{change:e.oneChange}},[e._v("辖区列表子页")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"user",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("用户管理页")])]),s("el-checkbox",{attrs:{label:"userList"},on:{change:e.oneChange}},[e._v("用户列表子页")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"renter",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("住户管理页")])]),s("el-checkbox",{attrs:{label:"renterList"},on:{change:e.oneChange}},[e._v("住户列表子页")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"school",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("学校管理页")])]),s("el-checkbox",{attrs:{label:"schoolList"},on:{change:e.oneChange}},[e._v("学校列表子页")])],1)],1),s("div",{staticClass:"permission"},[s("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[s("el-checkbox",{staticClass:"permission-span",attrs:{label:"information",border:""},on:{change:e.oneChange}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("资讯管理页")])]),s("el-checkbox",{attrs:{label:"infoList"},on:{change:e.oneChange}},[e._v("资讯列表子页")])],1)],1)],1),s("div",{staticClass:"submit"},[s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.newRole}},[e._v("提交")])],1)],1)],1)],1)])],1)},t=[],o=(s("b0c0"),s("365c")),i={data:function(){return{loading:!0,dialogRole:!1,form:{name:"",permissions:[]},stateList:[{label:"启用",value:1},{label:"禁用",value:0}],tableData:[],checkAll:!1,permissionList:["overview","baiduaip","baiduaipAdd","baiduaipGet","baiduaipDel","project","projectAdd","projectGet","projectDel","address","addressList","areas","addressAdd","addressGet","addressDel","face","faceList","pushLogs","faceAdd","faceGet","faceDel","device","deviceList","command","deviceAdd","deviceGet","deviceDel","package","apkAdd","apkDel","apkGet","apkVersionAdd","apkVersionDel","apkVersionSend","danger","doubtable","dangerlogs","dangerAdd","dangerDel","dangerGet","dangerLogGet","dangerLogDel","permission","roles","manage","roleGet","roleAdd","roleEdit","roleDel","manageGet","manageAdd","manageEdit","manageDel","manageResetPwd","outInLogs","area","areaList","user","userList","renter","renterList","school","schoolList","information","infoList"],dialogDel:!1,id:"",disabledRole:!1,current:1,size:10,total:0}},mounted:function(){this.getRoles()},methods:{addRole:function(){var e=this;e.dialogRole=!0,e.form={name:"",permissions:[]},e.disabledRole=!1,e.checkAll=!0,!0===e.checkAll&&(e.form.permissions=e.checkAll?e.permissionList:[])},getRoles:function(){var e=this;o["a"].roles(e.current).then((function(a){e.loading=!1,e.tableData=a.data,e.total=a.total})).catch((function(a){e.loading=!1}))},newRole:function(){var e=this;o["a"].role(e.form).then((function(a){e.dialogRole=!1,e.$message.success("提交成功"),e.getRoles(),e.currentPage=1,e.form={},e.form.permissions=[]}))},handleEdit:function(e,a){var s=this;s.dialogRole=!0,s.disabledRole=!0,o["a"].oneRole(a.name).then((function(e){s.form=e,s.checkAll=e.permissions.length>=s.permissionList.length}))},AllChange:function(e){var a=this;a.form.permissions=e?a.permissionList:[]},oneChange:function(e){var a=this;console.log(a.form.permissions),a.checkAll=a.form.permissions.length>=a.permissionList.length},handleDel:function(e,a){var s=this;s.dialogDel=!0,s.id=a.id},toDel:function(){var e=this;o["a"].delRole(e.id).then((function(a){e.$message.success("删除成功"),e.dialogDel=!1,e.getRoles(),e.currentPage=1}))},currentChange:function(e){var a=this;a.loading=!0,a.current=e,o["a"].roles(e,a.size).then((function(e){a.loading=!1,a.tableData=e.data,a.total=e.total})).catch((function(e){a.loading=!1}))},sizeChange:function(e){var a=this;a.loading=!0,a.size=e,o["a"].roles(a.current,e).then((function(e){a.loading=!1,a.tableData=e.data,a.total=e.total})).catch((function(e){a.loading=!1}))}}},l=i,r=(s("2ed6"),s("2877")),c=Object(r["a"])(l,n,t,!1,null,"325b3afa",null);a["default"]=c.exports},"2ed6":function(e,a,s){"use strict";var n=s("3cf6"),t=s.n(n);t.a},"365c":function(e,a,s){"use strict";var n=s("be3b"),t=s("99b1"),o=s.n(t),i={aip:function(e){return n["a"].post(o.a.Aip,e)},delAip:function(e){return n["a"].del(o.a.Aip,{id:e})},aips:function(e,a){return n["a"].get(o.a.Aips,{page:e,limit:a})},apk:function(e){return n["a"].post(o.a.Apk,e)},apks:function(e,a){return n["a"].get(o.a.Apks,{page:e,limit:a})},apkVersion:function(e){return n["a"].post(o.a.ApkVersion,e)},apkVersions:function(e,a,s){return n["a"].get(o.a.ApkVersions,{page:e,limit:a,apk_id:s})},_apkVersions:function(e){return n["a"].get(o.a.ApkVersions,{id:e})},publishApk:function(e){return n["a"].post(o.a.PublishApk,e)},project:function(e){return n["a"].post(o.a.Project,e)},projects:function(e,a){return n["a"].get(o.a.Projects,{page:e,limit:a})},address:function(e){return n["a"].post(o.a.Address,e)},getaddress:function(e){return n["a"].get(o.a.Address,{id:e})},addresses:function(e,a,s){return n["a"].get(o.a.Addresses,{page:e,limit:a,project_id:s})},addressTypes:function(e,a){return n["a"].get(o.a.AddressTypes,{page:e,limit:a})},face:function(e){return n["a"].post(o.a.Face,e)},faces:function(e,a){return n["a"].get(o.a.Faces,{page:e,limit:a})},pushRecords:function(e,a,s){return n["a"].get(o.a.PushRecords,{page:e,limit:a,name:s})},pushRecordCommands:function(e){return n["a"].get(o.a.PushRecordCommands,{id:e})},againPush:function(e){return n["a"].post(o.a.PushRecord,e)},areas:function(e,a,s){return n["a"].get(o.a.Areas,{page:e,limit:a,parent_id:s})},area:function(e){return n["a"].post(o.a.Area,e)},device:function(e){return n["a"].post(o.a.Device,e)},_device:function(e){return n["a"].get(o.a.Device,{uuid:e})},devices:function(e,a,s,t,i){return n["a"].get(o.a.Devices,{page:e,limit:a,type:s,uuid:t,address_id:i})},_devices:function(e,a,s){return n["a"].get(o.a.Devices,{direction:e,addresses:a,limit:s})},deviceLogs:function(e,a,s,t){return n["a"].get(o.a.DeviceLogs,{page:e,limit:a,uuid:s,type:t})},deviceFaceLogs:function(e,a,s,t){return n["a"].get(o.a.DeviceRecord,{page:e,limit:a,uuid:s,address_id:t})},deviceTypes:function(){return n["a"].get(o.a.DeviceTypes)},deviceHeart:function(e){return n["a"].get(o.a.DeviceHeartbeat,{uuid:e})},deviceCommands:function(e,a,s){return n["a"].get(o.a.DeviceCommands,{page:e,limit:a,uuid:s})},commandsType:function(e){return n["a"].get(o.a.Commands,{type:e})},sendDeviceCommand:function(e){return n["a"].post(o.a.SendDeviceCommand,e)},deviceUserList:function(e,a,s){return n["a"].get(o.a.DeviceUserList,{page:e,limit:a,uuid:s})},faceGroup:function(e){return n["a"].get(o.a.FaceGroup,{address_id:e})},uuid:function(e,a){return n["a"].get(o.a.Uuid,{page:e,limit:a})},dangerFace:function(e){return n["a"].post(o.a.DangerFace,e)},delDangerFace:function(e){return n["a"].del(o.a.DelDangerFace,{id:e})},dangerFaces:function(e,a){return n["a"].get(o.a.DangerFaces,{page:e,limit:a})},dangerLogs:function(e,a){return n["a"].get(o.a.DangerLogs,{page:e,limit:a})},roles:function(e,a){return n["a"].get(o.a.Roles,{page:e,limit:a})},oneRole:function(e){return n["a"].get(o.a.Role,{name:e})},role:function(e){return n["a"].post(o.a.Role,e)}};a["a"]=i},"3cf6":function(e,a,s){}}]);
//# sourceMappingURL=chunk-c0b427c0.bfdfe4ad.js.map