(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cd9604e"],{2882:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"获取数据中"}},[t("div",{staticClass:"handle-box"},[t("div",{staticClass:"btn"},[t("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("添加角色")])],1)]),t("el-table",{attrs:{data:e.tableData,border:"","header-cell-style":{background:"#f0f0f0",color:"#2a9f93"},"max-height":"620"}},[t("el-table-column",{attrs:{prop:"id",label:"ID"}}),t("el-table-column",{attrs:{prop:"name",label:"角色名"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleEdit(a.$index,a.row)}}},[e._v("编辑权限")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.handleDel(a.$index,a.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{visible:e.dialogDel,title:"删除角色",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(a){e.dialogDel=a}}},[t("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否删除该角色")]),t("span",[t("el-button",{attrs:{type:"primary"},on:{click:e.toDel}},[e._v("删除")]),t("el-button",{attrs:{type:"danger"},on:{click:function(a){e.dialogDel=!1}}},[e._v("取消")])],1)]),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,50,100,150,200,250,300],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(a){e.current=a},"update:current-page":function(a){e.current=a},"size-change":e.sizeChange}})],1),t("el-dialog",{attrs:{title:"添加角色",visible:e.dialogRole,width:"90%","close-on-click-modal":!1},on:{"update:visible":function(a){e.dialogRole=a}}},[t("div",{staticClass:"box"},[t("el-form",{attrs:{model:e.form,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"角色名称"}},[t("el-input",{attrs:{placeholder:"请输入角色名",disabled:e.disabledRole},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"选择权限"}},[t("el-checkbox",{on:{change:e.AllChange},model:{value:e.checkAll,callback:function(a){e.checkAll=a},expression:"checkAll"}},[e._v("全选")]),t("div",{staticClass:"permission"},[t("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[t("el-checkbox",{staticClass:"permission-span",attrs:{label:"overview",border:""},on:{change:e.oneChange}},[t("span",{staticStyle:{"font-weight":"bold"}},[e._v("数据总览页")])])],1)],1),t("div",{staticClass:"permission"},[t("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[t("el-checkbox",{staticClass:"permission-span",attrs:{label:"project",border:""},on:{change:e.oneChange}},[t("span",{staticStyle:{"font-weight":"bold"}},[e._v("项目管理页")])]),t("el-checkbox",{attrs:{label:"projectGet"},on:{change:e.oneChange}},[e._v("获取项目")])],1)],1),t("div",{staticClass:"permission"},[t("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[t("el-checkbox",{staticClass:"permission-span",attrs:{label:"address",border:""},on:{change:e.oneChange}},[t("span",{staticStyle:{"font-weight":"bold"}},[e._v("地址管理页")])]),t("el-checkbox",{attrs:{label:"addressList"},on:{change:e.oneChange}},[e._v("地址列表子页")]),t("el-checkbox",{attrs:{label:"areas"},on:{change:e.oneChange}},[e._v("地区管理子页")]),t("el-checkbox",{attrs:{label:"addressGet"},on:{change:e.oneChange}},[e._v("获取地址")])],1)],1),t("div",{staticClass:"permission"},[t("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[t("el-checkbox",{staticClass:"permission-span",attrs:{label:"face",border:""},on:{change:e.oneChange}},[t("span",{staticStyle:{"font-weight":"bold"}},[e._v("人脸管理页")])]),t("el-checkbox",{attrs:{label:"faceList"},on:{change:e.oneChange}},[e._v("人脸列表子页")]),t("el-checkbox",{attrs:{label:"pushLogs"},on:{change:e.oneChange}},[e._v("推送记录子页")]),t("el-checkbox",{attrs:{label:"faceGet"},on:{change:e.oneChange}},[e._v("获取人脸")])],1)],1),t("div",{staticClass:"permission"},[t("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[t("el-checkbox",{staticClass:"permission-span",attrs:{label:"device",border:""},on:{change:e.oneChange}},[t("span",{staticStyle:{"font-weight":"bold"}},[e._v("设备管理页")])]),t("el-checkbox",{attrs:{label:"deviceList"},on:{change:e.oneChange}},[e._v("设备列表子页")]),t("el-checkbox",{attrs:{label:"command"},on:{change:e.oneChange}},[e._v("指令管理子页")]),t("el-checkbox",{attrs:{label:"deviceGet"},on:{change:e.oneChange}},[e._v("获取设备")])],1)],1),t("div",{staticClass:"permission"},[t("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[t("el-checkbox",{staticClass:"permission-span",attrs:{label:"danger",border:""},on:{change:e.oneChange}},[t("span",{staticStyle:{"font-weight":"bold"}},[e._v("可疑管理页")])]),t("el-checkbox",{attrs:{label:"doubtable"},on:{change:e.oneChange}},[e._v("可疑人脸子页")]),t("el-checkbox",{attrs:{label:"dangerlogs"},on:{change:e.oneChange}},[e._v("可疑日志子页")]),t("el-checkbox",{attrs:{label:"dangerGet"},on:{change:e.oneChange}},[e._v("获取可疑列表")]),t("el-checkbox",{attrs:{label:"dangerLogGet"},on:{change:e.oneChange}},[e._v("获取可疑日志列表")])],1)],1),t("div",{staticClass:"permission"},[t("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[t("el-checkbox",{staticClass:"permission-span",attrs:{label:"permission",border:""},on:{change:e.oneChange}},[t("span",{staticStyle:{"font-weight":"bold"}},[e._v("权限管理页")])]),t("el-checkbox",{attrs:{label:"roles"},on:{change:e.oneChange}},[e._v("角色管理页")]),t("el-checkbox",{attrs:{label:"manage"},on:{change:e.oneChange}},[e._v("用户管理页")]),t("el-checkbox",{attrs:{label:"roleAdd"},on:{change:e.oneChange}},[e._v("添加角色")]),t("el-checkbox",{attrs:{label:"roleGet"},on:{change:e.oneChange}},[e._v("获取角色列表")])],1)],1),t("div",{staticClass:"permission",staticStyle:{"margin-left":"180px"}},[t("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[t("el-checkbox",{attrs:{label:"manageAdd"},on:{change:e.oneChange}},[e._v("添加管理员")]),t("el-checkbox",{attrs:{label:"manageGet"},on:{change:e.oneChange}},[e._v("管理员列表")]),t("el-checkbox",{attrs:{label:"manageResetPwd"},on:{change:e.oneChange}},[e._v("重置密码")])],1)],1),t("div",{staticClass:"permission"},[t("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[t("el-checkbox",{staticClass:"permission-span",attrs:{label:"outInLogs",border:""},on:{change:e.oneChange}},[t("span",{staticStyle:{"font-weight":"bold"}},[e._v("进出记录管理页")])])],1)],1),t("div",{staticClass:"permission"},[t("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}},[t("el-checkbox",{staticClass:"permission-span",attrs:{label:"area",border:""},on:{change:e.oneChange}},[t("span",{staticStyle:{"font-weight":"bold"}},[e._v("辖区管理页")])]),t("el-checkbox",{attrs:{label:"areaList"},on:{change:e.oneChange}},[e._v("辖区列表子页")])],1)],1)],1),t("div",{staticClass:"submit"},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.newRole}},[e._v("提交")])],1)],1)],1)],1)])],1)},s=[],i=(t("b0c0"),t("365c")),o={data:function(){return{loading:!0,dialogRole:!1,form:{name:"",permissions:[]},stateList:[{label:"启用",value:1},{label:"禁用",value:0}],tableData:[],checkAll:!1,permissionList:["overview","project","projectGet","address","addressList","areas","addressGet","face","faceList","pushLogs","faceGet","device","deviceList","command","deviceAdd","deviceGet","apkDel","danger","doubtable","dangerlogs","dangerGet","dangerLogGet","permission","roles","manage","roleGet","roleAdd","roleEdit","manageGet","manageAdd","manageResetPwd","outInLogs","area","areaList"],dialogDel:!1,id:"",disabledRole:!1,current:1,size:10,total:0}},mounted:function(){this.getRoles()},methods:{addRole:function(){var e=this;e.dialogRole=!0,e.form={name:"",permissions:[]},e.disabledRole=!1,e.checkAll=!0,!0===e.checkAll&&(e.form.permissions=e.checkAll?e.permissionList:[])},getRoles:function(){var e=this;i["a"].roles(e.current).then((function(a){e.loading=!1,e.tableData=a.data,e.total=a.total})).catch((function(a){e.loading=!1}))},newRole:function(){var e=this;i["a"].role(e.form).then((function(a){e.dialogRole=!1,e.$message.success("提交成功"),e.getRoles(),e.currentPage=1,e.form={},e.form.permissions=[]}))},handleEdit:function(e,a){var t=this;t.dialogRole=!0,t.disabledRole=!0,i["a"].oneRole(a.name).then((function(e){t.form=e,t.checkAll=e.permissions.length>=t.permissionList.length}))},AllChange:function(e){var a=this;a.form.permissions=e?a.permissionList:[]},oneChange:function(e){var a=this;console.log(a.form.permissions),a.checkAll=a.form.permissions.length>=a.permissionList.length},handleDel:function(e,a){var t=this;t.dialogDel=!0,t.id=a.id},toDel:function(){var e=this;i["a"].delRole(e.id).then((function(a){e.$message.success("删除成功"),e.dialogDel=!1,e.getRoles(),e.currentPage=1}))},currentChange:function(e){var a=this;a.loading=!0,a.current=e,i["a"].roles(e,a.size).then((function(e){a.loading=!1,a.tableData=e.data,a.total=e.total})).catch((function(e){a.loading=!1}))},sizeChange:function(e){var a=this;a.loading=!0,a.size=e,i["a"].roles(a.current,e).then((function(e){a.loading=!1,a.tableData=e.data,a.total=e.total})).catch((function(e){a.loading=!1}))}}},r=o,l=(t("e834"),t("2877")),c=Object(l["a"])(r,n,s,!1,null,"4060930b",null);a["default"]=c.exports},"365c":function(e,a,t){"use strict";var n=t("be3b"),s=t("99b1"),i=t.n(s),o={aip:function(e){return n["a"].post(i.a.Aip,e)},delAip:function(e){return n["a"].del(i.a.Aip,{id:e})},aips:function(e,a){return n["a"].get(i.a.Aips,{page:e,limit:a})},apk:function(e){return n["a"].post(i.a.Apk,e)},apks:function(e,a){return n["a"].get(i.a.Apks,{page:e,limit:a})},apkVersion:function(e){return n["a"].post(i.a.ApkVersion,e)},apkVersions:function(e,a,t){return n["a"].get(i.a.ApkVersions,{page:e,limit:a,apk_id:t})},_apkVersions:function(e){return n["a"].get(i.a.ApkVersions,{id:e})},publishApk:function(e){return n["a"].post(i.a.PublishApk,e)},project:function(e){return n["a"].post(i.a.Project,e)},projects:function(e,a){return n["a"].get(i.a.Projects,{page:e,limit:a})},address:function(e){return n["a"].post(i.a.Address,e)},getaddress:function(e){return n["a"].get(i.a.Address,{id:e})},addresses:function(e,a,t,s,o){return n["a"].get(i.a.Addresses,{page:e,limit:a,project_id:t,area_id:s,address:o})},addressTypes:function(e,a){return n["a"].get(i.a.AddressTypes,{page:e,limit:a})},face:function(e){return n["a"].post(i.a.Face,e)},faces:function(e,a,t){return n["a"].get(i.a.Faces,{page:e,limit:a,name:t})},pushRecords:function(e,a,t,s){return n["a"].get(i.a.PushRecords,{page:e,limit:a,name:t,address:s})},pushRecordCommands:function(e){return n["a"].get(i.a.PushRecordCommands,{id:e})},againPush:function(e){return n["a"].post(i.a.PushRecord,e)},areas:function(e,a,t){return n["a"].get(i.a.Areas,{page:e,limit:a,parent_id:t})},area:function(e){return n["a"].post(i.a.Area,e)},device:function(e){return n["a"].post(i.a.Device,e)},_device:function(e){return n["a"].get(i.a.Device,{uuid:e})},devices:function(e,a,t,s,o,r){return n["a"].get(i.a.Devices,{page:e,limit:a,type:t,uuid:s,area_id:o,address_id:r})},_devices:function(e,a,t){return n["a"].get(i.a.Devices,{direction:e,addresses:a,limit:t})},deviceLogs:function(e,a,t,s){return n["a"].get(i.a.DeviceLogs,{page:e,limit:a,uuid:t,type:s})},deviceFaceLogs:function(e,a,t,s,o,r){return n["a"].get(i.a.DeviceRecord,{page:e,limit:a,uuid:t,name:s,area_id:o,address_id:r})},deviceTypes:function(){return n["a"].get(i.a.DeviceTypes)},deviceHeart:function(e){return n["a"].get(i.a.DeviceHeartbeat,{uuid:e})},deviceCommands:function(e,a,t){return n["a"].get(i.a.DeviceCommands,{page:e,limit:a,uuid:t})},commandsType:function(e){return n["a"].get(i.a.Commands,{type:e})},sendDeviceCommand:function(e){return n["a"].post(i.a.SendDeviceCommand,e)},deviceUserList:function(e,a,t){return n["a"].get(i.a.DeviceUserList,{page:e,limit:a,uuid:t})},faceGroup:function(e){return n["a"].get(i.a.FaceGroup,{address_id:e})},uuid:function(e,a){return n["a"].get(i.a.Uuid,{page:e,limit:a})},dangerFace:function(e){return n["a"].post(i.a.DangerFace,e)},delDangerFace:function(e){return n["a"].del(i.a.DelDangerFace,{id:e})},dangerFaces:function(e,a){return n["a"].get(i.a.DangerFaces,{page:e,limit:a})},dangerLogs:function(e,a){return n["a"].get(i.a.DangerLogs,{page:e,limit:a})},roles:function(e,a){return n["a"].get(i.a.Roles,{page:e,limit:a})},oneRole:function(e){return n["a"].get(i.a.Role,{name:e})},role:function(e){return n["a"].post(i.a.Role,e)},users:function(e,a){return n["a"].get(i.a.Users,{page:e,limit:a})},user:function(e){return n["a"].post(i.a.User,e)},policeStation:function(e){return n["a"].post(i.a.PoliceStation,e)},policeStations:function(e,a,t){return n["a"].get(i.a.PoliceStations,{page:e,limit:a,name:t})},information:function(e){return n["a"].post(i.a.Information,e)},informations:function(e,a,t,s){return n["a"].get(i.a.Information,{page:e,limit:a,id:t,title:s})},faceSwitch:function(e){return n["a"].post(i.a.FaceSwicth,e)},delFaceSwitch:function(e){return n["a"].del(i.a.FaceSwicth,{id:e})},faceSwitches:function(e,a){return n["a"].get(i.a.FaceSwicthes,{page:e,limit:a})}};a["a"]=o},"8b3f":function(e,a,t){},e834:function(e,a,t){"use strict";var n=t("8b3f"),s=t.n(n);s.a}}]);
//# sourceMappingURL=chunk-0cd9604e.00509ea4.js.map