(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ba53f69"],{"365c":function(e,t,a){"use strict";var n=a("be3b"),r=a("99b1"),i=a.n(r),o={aip:function(e){return n["a"].post(i.a.Aip,e)},delAip:function(e){return n["a"].del(i.a.Aip,{id:e})},aips:function(e,t){return n["a"].get(i.a.Aips,{page:e,limit:t})},apk:function(e){return n["a"].post(i.a.Apk,e)},apks:function(e,t){return n["a"].get(i.a.Apks,{page:e,limit:t})},apkVersion:function(e){return n["a"].post(i.a.ApkVersion,e)},apkVersions:function(e,t,a){return n["a"].get(i.a.ApkVersions,{page:e,limit:t,apk_id:a})},_apkVersions:function(e){return n["a"].get(i.a.ApkVersions,{id:e})},publishApk:function(e){return n["a"].post(i.a.PublishApk,e)},project:function(e){return n["a"].post(i.a.Project,e)},projects:function(e,t){return n["a"].get(i.a.Projects,{page:e,limit:t})},address:function(e){return n["a"].post(i.a.Address,e)},getaddress:function(e){return n["a"].get(i.a.Address,{id:e})},addresses:function(e,t,a,r,o){return n["a"].get(i.a.Addresses,{page:e,limit:t,project_id:a,area_id:r,address:o})},addressTypes:function(e,t){return n["a"].get(i.a.AddressTypes,{page:e,limit:t})},addressesMap:function(e,t,a){return n["a"].get(i.a.Addresses,{page:e,limit:t,type:a})},face:function(e){return n["a"].post(i.a.Face,e)},faces:function(e,t,a){return n["a"].get(i.a.Faces,{page:e,limit:t,name:a})},searchFace:function(e){return n["a"].post(i.a.SearchImageFace,e)},pushRecords:function(e,t,a,r){return n["a"].get(i.a.PushRecords,{page:e,limit:t,name:a,address:r})},pushRecordCommands:function(e){return n["a"].get(i.a.PushRecordCommands,{id:e})},againPush:function(e){return n["a"].post(i.a.PushRecord,e)},areas:function(e,t,a){return n["a"].get(i.a.Areas,{page:e,limit:t,parent_id:a})},area:function(e){return n["a"].post(i.a.Area,e)},device:function(e){return n["a"].post(i.a.Device,e)},_device:function(e){return n["a"].get(i.a.Device,{uuid:e})},devices:function(e,t,a,r,o,s,l){return n["a"].get(i.a.Devices,{page:e,limit:t,type:a,uuid:r,area_id:o,address_id:s,online:l})},_devices:function(e,t,a){return n["a"].get(i.a.Devices,{direction:e,addresses:t,limit:a})},deviceLogs:function(e,t,a,r){return n["a"].get(i.a.DeviceLogs,{page:e,limit:t,uuid:a,type:r})},deviceFaceLogs:function(e,t,a,r,o,s){return n["a"].get(i.a.DeviceRecord,{page:e,limit:t,uuid:a,search:r,area_id:o,address_id:s})},searchFaceLogs:function(e,t,a){return n["a"].get(i.a.DeviceRecord,{page:e,limit:t,faces:a})},deviceTypes:function(){return n["a"].get(i.a.DeviceTypes)},deviceHeart:function(e){return n["a"].get(i.a.DeviceHeartbeat,{uuid:e})},deviceCommands:function(e,t,a){return n["a"].get(i.a.DeviceCommands,{page:e,limit:t,uuid:a})},commandsType:function(e){return n["a"].get(i.a.Commands,{type:e})},sendDeviceCommand:function(e){return n["a"].post(i.a.SendDeviceCommand,e)},catchFace:function(e){return n["a"].get(i.a.CatchFaces,{id:e})},deviceUserList:function(e,t,a){return n["a"].get(i.a.DeviceUserList,{page:e,limit:t,uuid:a})},faceGroup:function(e){return n["a"].get(i.a.FaceGroup,{address_id:e})},uuid:function(e,t){return n["a"].get(i.a.Uuid,{page:e,limit:t})},dangerFace:function(e){return n["a"].post(i.a.DangerFace,e)},delDangerFace:function(e){return n["a"].del(i.a.DelDangerFace,{id:e})},dangerFaces:function(e,t){return n["a"].get(i.a.DangerFaces,{page:e,limit:t})},dangerLogs:function(e,t,a,r){return n["a"].get(i.a.DangerLogs,{page:e,limit:t,danger_id:a,address:r})},alert:function(e,t,a,r,o,s,l,c,u){return n["a"].get(i.a.DangerAlerts,{page:e,limit:t,state:a,search:r,dangers:o,alert_type:s,start:l,end:c,danger_type:u})},handleAlerts:function(e){return n["a"].post(i.a.HandleAlerts,{results:e})},dangerTypes:function(){return n["a"].get(i.a.DangerTypes,{})},notifyChange:function(e){return n["a"].post(i.a.ChangeDangerFace,e)},roles:function(e,t){return n["a"].get(i.a.Roles,{page:e,limit:t})},oneRole:function(e){return n["a"].get(i.a.Role,{name:e})},role:function(e){return n["a"].post(i.a.Role,e)},users:function(e,t){return n["a"].get(i.a.Users,{page:e,limit:t})},user:function(e){return n["a"].post(i.a.User,e)},policeLevel:function(e){return n["a"].post(i.a.PoliceLevel,e)},policeLevels:function(e,t,a,r){return n["a"].get(i.a.PoliceLevels,{page:e,limit:t,level:a,parent_id:r})},policeman:function(e){return n["a"].post(i.a.Policeman,e)},policemen:function(e,t,a,r,o,s){return n["a"].get(i.a.Policemen,{page:e,limit:t,station_id:a,department_id:r,state:o,search:s})},audit:function(e){return n["a"].post(i.a.PassPoliceman,e)},policeStation:function(e){return n["a"].post(i.a.PoliceStation,e)},policeStations:function(e,t,a){return n["a"].get(i.a.PoliceStations,{page:e,limit:t,name:a})},information:function(e){return n["a"].post(i.a.Information,e)},informations:function(e,t,a,r){return n["a"].get(i.a.Information,{page:e,limit:t,id:a,title:r})},faceSwitch:function(e){return n["a"].post(i.a.FaceSwicth,e)},delFaceSwitch:function(e){return n["a"].del(i.a.FaceSwicth,{id:e})},faceSwitches:function(e,t){return n["a"].get(i.a.FaceSwicthes,{page:e,limit:t})},statistical:function(){return n["a"].get(i.a.Count)}};t["a"]=o},7626:function(e,t,a){"use strict";var n=a("ef68"),r=a.n(n);r.a},"7aad":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"获取数据中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("div",{staticClass:"tip"},[e._v(" 根据姓名筛选： ")]),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(e.name)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search(e.name)}},slot:"append"})],1)],1)]),a("div",{staticClass:"btn"},[a("div",{staticClass:"tip"},[e._v(" 根据处理状态筛选： ")]),a("el-select",{attrs:{placeholder:"请选择处理状态",filterable:""},on:{change:e.stateChange},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},e._l(e.stateList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"btn"},[a("div",{staticClass:"tip"},[e._v(" 根据告警分类和时间筛选： ")]),a("el-select",{attrs:{placeholder:"请选择可疑分类"},on:{change:e.alertTypeChange},model:{value:e.alert_type,callback:function(t){e.alert_type=t},expression:"alert_type"}},e._l(e.dangerTypeList,(function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})})),1),a("el-date-picker",{attrs:{"value-format":e.valueFormatTime,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.batchOpen}},[e._v("批量处理")])],1)]),a("el-table",{ref:"multipleTable",attrs:{data:e.tableData,border:"","header-cell-style":{background:"#f0f0f0",color:"#003366"},"max-height":"620","row-key":function(e){return e.id}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100px"}}),a("el-table-column",{attrs:{prop:"danger.name",label:"姓名",width:"200px"}}),a("el-table-column",{attrs:{prop:"address.address",label:"所出现地址"}}),a("el-table-column",{attrs:{prop:"alert_type",label:"告警分类",width:"100px"}}),a("el-table-column",{attrs:{prop:"danger_type",label:"危险类型",width:"100px"}}),a("el-table-column",{attrs:{prop:"state",label:"处理状态",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?a("span",[e._v("未处理")]):e._e(),2==t.row.state?a("span",[e._v("已处理")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.handleProcess(t.$index,t.row)}}},[e._v("立即处理")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("查看详情")])]}}])})],1),a("el-dialog",{attrs:{visible:e.dialogProcess,title:"告警处理","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogProcess=t}}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.processForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"处理人"}},[a("el-input",{attrs:{disabled:""},model:{value:e.processForm.name,callback:function(t){e.$set(e.processForm,"name",t)},expression:"processForm.name"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"非必填"},model:{value:e.processForm.remark,callback:function(t){e.$set(e.processForm,"remark",t)},expression:"processForm.remark"}})],1),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.processed}},[e._v("提交")])],1)],1)],1)],1)]),a("el-dialog",{attrs:{visible:e.dialogDetail,title:"查看详情","close-on-click-modal":!1,width:"80%"},on:{"update:visible":function(t){e.dialogDetail=t}}},[a("div",{staticClass:"box"},[a("el-table",{attrs:{data:e.DetailForm,border:"","header-cell-style":{background:"#f0f0f0",color:"#003366"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"danger.name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"danger.notify_score",label:"相似度"}}),a("el-table-column",{attrs:{prop:"danger.href",label:"人脸库照片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.danger.href?a("div",[a("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.danger.href}}),a("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.danger.href},slot:"reference"})])],1):a("div",[a("span",[e._v("--暂无图片--")])])]}}])}),a("el-table-column",{attrs:{prop:"log.image",label:"抓拍原图"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.log.image?a("div",[a("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.log.image}}),a("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.log.image},slot:"reference"})])],1):a("div",[a("span",[e._v("--暂无图片--")])])]}}])}),a("el-table-column",{attrs:{prop:"log.catch_faces[0].face_img",label:"抓拍照片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.log.catch_faces.length>0?a("div",[a("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:"data:image/png;base64,"+t.row.log.catch_faces[0].face_img}}),a("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:"data:image/png;base64,"+t.row.log.catch_faces[0].face_img},slot:"reference"})])],1):a("div",[a("span",[e._v("--暂无图片--")])])]}}])}),a("el-table-column",{attrs:{prop:"log.timestamp",label:"抓拍时间"}})],1)],1)]),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,50,100,150,200,250,300],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.handleSizeChange}})],1)],1)},r=[],i=(a("4160"),a("b0c0"),a("159b"),a("365c")),o=a("c466"),s=(a("94d1"),{data:function(){return{loading:!0,name:"",state:1,stateList:[{label:"全部",value:0},{label:"未处理",value:1},{label:"已处理",value:2}],tableData:[],dangerTypeList:[],alert_type:"",date:"",start_date:"",end_date:"",valueFormatTime:"yyyy-MM-dd HH:mm:ss",dangers:[],dialogProcess:!1,processForm:{name:localStorage.getItem("username"),remark:""},id:"",multipleSelection:[],dialogDetail:!1,DetailForm:[],current:1,size:10,total:0}},mounted:function(){this.getAlerts(),this.getAlertType()},methods:{getAlerts:function(){var e=this;i["a"].alert(e.current,10,e.state).then((function(t){e.$refs.multipleTable.clearSelection(),e.tableData=t.data,e.total=t.total,e.loading=!1})).catch((function(t){e.loading=!1}))},getAlertType:function(){var e=this;e.loading=!0,i["a"].dangerTypes().then((function(t){e.dangerTypeList=t.alert_type,e.loading=!1})).catch((function(t){e.loading=!1}))},alertTypeChange:function(e){var t=this;t.loading=!0,i["a"].alert(1,10,t.state,t.name,t.dangers,e,t.start_date,t.end_date).then((function(e){t.tableData=e.data,t.total=e.total,t.loading=!1})).catch((function(e){t.loading=!1}))},dateChange:function(e){var t=this;t.loading=!0,t.start_date=e[0],t.end_date=e[1],i["a"].alert(1,10,t.state,t.name,t.dangers,t.alert_type,e[0],e[1]).then((function(e){t.tableData=e.data,t.total=e.total,t.loading=!1})).catch((function(e){t.loading=!1}))},stateChange:function(e){var t=this;t.loading=!0,i["a"].alert(1,10,e,t.name,t.dangers,t.alert_type,t.start_date,t.end_date).then((function(e){t.tableData=e.data,t.total=e.total,t.loading=!1})).catch((function(e){t.loading=!1}))},search:function(){var e=this;e.loading=!0,i["a"].alert(1,10,e.state,e.name,e.dangers,e.alert_type,e.start_date,e.end_date).then((function(t){e.tableData=t.data,e.total=t.total,e.loading=!1})).catch((function(t){e.loading=!1}))},handleProcess:function(e,t){this.dialogProcess=!0,console.log(t),this.id=t.id,this.processForm={name:localStorage.getItem("username"),remark:""}},stateRadio:function(e){console.log(e)},handleSelectionChange:function(e){this.multipleSelection=e,console.log(123,this.multipleSelection)},batchOpen:function(){this.multipleSelection.length>0?this.dialogProcess=!0:this.$message.warning("请选择要处理的数据")},processed:function(){var e=this,t=this,a=[];this.multipleSelection.length>0?(this.multipleSelection.forEach((function(t){a.push({id:t.id,remark:e.processForm.remark})})),i["a"].handleAlerts(a).then((function(e){t.$message.success("提交成功！"),t.dialogProcess=!1,t.getAlerts()}))):(a.push({id:t.id,remark:this.processForm.remark}),i["a"].handleAlerts(a).then((function(e){t.$message.success("提交成功！"),t.dialogProcess=!1,t.getAlerts()})))},handleDetail:function(e,t){console.log([t]),this.DetailForm=[t],this.DetailForm.forEach((function(e){e.log.timestamp=o["a"].formatTime(e.log.timestamp,"Y-M-D h:m:s")})),this.dialogDetail=!0},handleCurrentChange:function(e){var t=this;t.loading=!0,t.current=e,i["a"].alert(e,t.size,t.state,t.name,t.dangers,t.alert_type,t.start_date,t.end_date).then((function(e){t.tableData=e.data,t.total=e.total,t.loading=!1})).catch((function(e){t.loading=!1}))},handleSizeChange:function(e){var t=this;t.loading=!0,t.size=e,i["a"].alert(t.current,e,t.state,t.name,t.dangers,t.alert_type,t.start_date,t.end_date).then((function(e){t.tableData=e.data,t.total=e.total,t.loading=!1})).catch((function(e){t.loading=!1}))}}}),l=s,c=(a("7626"),a("2877")),u=Object(c["a"])(l,n,r,!1,null,"61d64e64",null);t["default"]=u.exports},"94d1":function(e,t,a){"use strict";var n={reg:function(e){var t=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/;if(t.test(e)){if(18==e.length){for(var a=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),n=new Array(1,0,10,9,8,7,6,5,4,3,2),r=0,i=0;i<17;i++)r+=e.substring(i,i+1)*a[i];var o=r%11,s=e.substring(17);return 2==o?"X"==s||"x"==s||(alert("身份证号码错误！"),!1):s==n[o]||(alert("身份证号码错误！"),!1)}return!0}return alert("身份证格式不正确!"),!1}};t["a"]=n},c466:function(e,t,a){"use strict";a("d3b7"),a("ac1f"),a("25f0"),a("5319");var n={};function r(e){return e=e.toString(),e[1]?e:"0"+e}n.formatTime=function(e,t){var a=["Y","M","D","h","m","s"],n=[],i=new Date(1e3*e);for(var o in n.push(i.getFullYear()),n.push(r(i.getMonth()+1)),n.push(r(i.getDate())),n.push(r(i.getHours())),n.push(r(i.getMinutes())),n.push(r(i.getSeconds())),n)t=t.replace(a[o],n[o]);return t},t["a"]=n},ef68:function(e,t,a){}}]);
//# sourceMappingURL=chunk-2ba53f69.1605580410337.js.map