(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2eb9360a"],{"0dce":function(t,e,a){},"365c":function(t,e,a){"use strict";var n=a("be3b"),i=a("99b1"),o=a.n(i),r={aip:function(t){return n["a"].post(o.a.Aip,t)},delAip:function(t){return n["a"].del(o.a.Aip,{id:t})},aips:function(t,e){return n["a"].get(o.a.Aips,{page:t,limit:e})},apk:function(t){return n["a"].post(o.a.Apk,t)},apks:function(t,e){return n["a"].get(o.a.Apks,{page:t,limit:e})},apkVersion:function(t){return n["a"].post(o.a.ApkVersion,t)},apkVersions:function(t,e,a){return n["a"].get(o.a.ApkVersions,{page:t,limit:e,apk_id:a})},_apkVersions:function(t){return n["a"].get(o.a.ApkVersions,{id:t})},publishApk:function(t){return n["a"].post(o.a.PublishApk,t)},project:function(t){return n["a"].post(o.a.Project,t)},projects:function(t,e){return n["a"].get(o.a.Projects,{page:t,limit:e})},address:function(t){return n["a"].post(o.a.Address,t)},getaddress:function(t){return n["a"].get(o.a.Address,{id:t})},addresses:function(t,e,a,i,r){return n["a"].get(o.a.Addresses,{page:t,limit:e,project_id:a,area_id:i,address:r})},addressTypes:function(t,e){return n["a"].get(o.a.AddressTypes,{page:t,limit:e})},addressesMap:function(t,e,a){return n["a"].get(o.a.Addresses,{page:t,limit:e,type:a})},face:function(t){return n["a"].post(o.a.Face,t)},faces:function(t,e,a){return n["a"].get(o.a.Faces,{page:t,limit:e,name:a})},searchFace:function(t){return n["a"].post(o.a.SearchImageFace,t)},pushRecords:function(t,e,a,i){return n["a"].get(o.a.PushRecords,{page:t,limit:e,name:a,address:i})},pushRecordCommands:function(t){return n["a"].get(o.a.PushRecordCommands,{id:t})},againPush:function(t){return n["a"].post(o.a.PushRecord,t)},areas:function(t,e,a){return n["a"].get(o.a.Areas,{page:t,limit:e,parent_id:a})},area:function(t){return n["a"].post(o.a.Area,t)},device:function(t){return n["a"].post(o.a.Device,t)},_device:function(t){return n["a"].get(o.a.Device,{uuid:t})},devices:function(t,e,a,i,r,s,c){return n["a"].get(o.a.Devices,{page:t,limit:e,type:a,uuid:i,area_id:r,address_id:s,online:c})},_devices:function(t,e,a){return n["a"].get(o.a.Devices,{direction:t,addresses:e,limit:a})},deviceLogs:function(t,e,a,i){return n["a"].get(o.a.DeviceLogs,{page:t,limit:e,uuid:a,type:i})},deviceFaceLogs:function(t,e,a,i,r,s){return n["a"].get(o.a.DeviceRecord,{page:t,limit:e,uuid:a,search:i,area_id:r,address_id:s})},searchFaceLogs:function(t,e,a){return n["a"].get(o.a.DeviceRecord,{page:t,limit:e,faces:a})},deviceTypes:function(){return n["a"].get(o.a.DeviceTypes)},deviceHeart:function(t){return n["a"].get(o.a.DeviceHeartbeat,{uuid:t})},deviceCommands:function(t,e,a){return n["a"].get(o.a.DeviceCommands,{page:t,limit:e,uuid:a})},commandsType:function(t){return n["a"].get(o.a.Commands,{type:t})},sendDeviceCommand:function(t){return n["a"].post(o.a.SendDeviceCommand,t)},catchFace:function(t){return n["a"].get(o.a.CatchFaces,{id:t})},deviceUserList:function(t,e,a){return n["a"].get(o.a.DeviceUserList,{page:t,limit:e,uuid:a})},faceGroup:function(t){return n["a"].get(o.a.FaceGroup,{address_id:t})},uuid:function(t,e){return n["a"].get(o.a.Uuid,{page:t,limit:e})},dangerFace:function(t){return n["a"].post(o.a.DangerFace,t)},delDangerFace:function(t){return n["a"].del(o.a.DelDangerFace,{id:t})},dangerFaces:function(t,e){return n["a"].get(o.a.DangerFaces,{page:t,limit:e})},dangerLogs:function(t,e,a,i){return n["a"].get(o.a.DangerLogs,{page:t,limit:e,danger_id:a,address:i})},alert:function(t,e,a,i,r,s,c,l){return n["a"].get(o.a.DangerAlerts,{page:t,limit:e,state:a,search:i,dangers:r,danger_type:s,start:c,end:l})},handleAlerts:function(t){return n["a"].post(o.a.HandleAlerts,{results:t})},dangerTypes:function(){return n["a"].get(o.a.DangerTypes,{})},roles:function(t,e){return n["a"].get(o.a.Roles,{page:t,limit:e})},oneRole:function(t){return n["a"].get(o.a.Role,{name:t})},role:function(t){return n["a"].post(o.a.Role,t)},users:function(t,e){return n["a"].get(o.a.Users,{page:t,limit:e})},user:function(t){return n["a"].post(o.a.User,t)},policeLevel:function(t){return n["a"].post(o.a.PoliceLevel,t)},policeLevels:function(t,e,a,i){return n["a"].get(o.a.PoliceLevels,{page:t,limit:e,level:a,parent_id:i})},policeman:function(t){return n["a"].post(o.a.Policeman,t)},policemen:function(t,e,a,i,r,s){return n["a"].get(o.a.Policemen,{page:t,limit:e,station_id:a,department_id:i,state:r,search:s})},audit:function(t){return n["a"].post(o.a.PassPoliceman,t)},policeStation:function(t){return n["a"].post(o.a.PoliceStation,t)},policeStations:function(t,e,a){return n["a"].get(o.a.PoliceStations,{page:t,limit:e,name:a})},information:function(t){return n["a"].post(o.a.Information,t)},informations:function(t,e,a,i){return n["a"].get(o.a.Information,{page:t,limit:e,id:a,title:i})},faceSwitch:function(t){return n["a"].post(o.a.FaceSwicth,t)},delFaceSwitch:function(t){return n["a"].del(o.a.FaceSwicth,{id:t})},faceSwitches:function(t,e){return n["a"].get(o.a.FaceSwicthes,{page:t,limit:e})},statistical:function(){return n["a"].get(o.a.Count)}};e["a"]=r},8377:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF+mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA4LTAzVDE1OjAyOjUwKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wOC0wM1QxNTowNjo0NiswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wOC0wM1QxNTowNjo0NiswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozYWM4ZWE3Ni1jZmY0LWE5NDYtYTQ1Yy0wNjNhZjhkZjMyYjgiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjNzQyZjVkYS0yOWMwLTRiNGQtODBkOC1lMDVhY2UxNmJiMDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2NDZiZmE4Zi1kYjU0LTc4NDgtOWNjYS0zNzMwYjVhMTkwNzMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjY0NmJmYThmLWRiNTQtNzg0OC05Y2NhLTM3MzBiNWExOTA3MyIgc3RFdnQ6d2hlbj0iMjAyMC0wOC0wM1QxNTowMjo1MCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozYWM4ZWE3Ni1jZmY0LWE5NDYtYTQ1Yy0wNjNhZjhkZjMyYjgiIHN0RXZ0OndoZW49IjIwMjAtMDgtMDNUMTU6MDY6NDYrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7ROSidAAACIUlEQVR4nO2bS1LDMBBEbYrTkCUX4gBwGnKAXIglXMesppJSLOvT85HtfsukgmYeLckuy/OyLBPp5yW6gL3zqvnHLrfr9Pfz2fvz1qkw9wzy9n7Nfvf70V67qsBOetcQ+V2XSC0iBWotvqEiIwRa7VohIr03EY8t3/WyoiqBl1t+4W3As7Fl6khi2mfNpuKVwIiLTZcxPQRGXqmbj20tcITbHNMaeCcCYilwhPQJZrUwgSBWAkdKn2BSExMIQoEgFgJHnL6Cem1MIAgFglAgCAWCUCAIBYJQIAgFglgIDH3MWEC9NiYQhAJBrASOOI1NamICQSwFjpRCs1qYQBBrgSOk0LQGjwRGSjQf22sKR0h0GdNzDfSU6DaW9ybi0dihzwdOk22D7ktF1BFfaVTrKVnYRhV9yBwVGX6ZFC1QSEXkhIYLS1EXuPUeRgPDicoxr73qNX+ZjOV9YkH9n7B8P39mOYWjj3ik45uk2kJgtLgcJu+RaAocVVyKqkgNgXsRl6IiEr0T2au8R6AeehN4BHGPdKexJ4FHk/dIc2+tAo8sT2jqsUXgGeQJ1b3yoRJIrcAzpU+o6rlG4BnlCcXeOYVBSgLPnD5h0wETCLIlkOm7k3XBBILkBDJ9z6w6YQJBKBCEAkEoEIQCQSgQhAJBKBCEAkEoEIQCQSgQJCdwN+fzHFl1spVASryTdVGawpRYcFCzBp5ZYrH31SO+pB7uwiD/wotN9qUH0JgAAAAASUVORK5CYII="},c466:function(t,e,a){"use strict";a("d3b7"),a("ac1f"),a("25f0"),a("5319");var n={};function i(t){return t=t.toString(),t[1]?t:"0"+t}n.formatTime=function(t,e){var a=["Y","M","D","h","m","s"],n=[],o=new Date(1e3*t);for(var r in n.push(o.getFullYear()),n.push(i(o.getMonth()+1)),n.push(i(o.getDate())),n.push(i(o.getHours())),n.push(i(o.getMinutes())),n.push(i(o.getSeconds())),n)e=e.replace(a[r],n[r]);return e},e["a"]=n},e2a6:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"wrap"}},[n("div",{staticClass:"viewport"},[n("div",{staticClass:"column"},[n("div",{staticClass:"overview panel"},[n("div",{staticClass:"inner"},[n("div",{staticClass:"item"},[n("h4",[t._v(t._s(t.CZWCount))]),t._m(0)]),n("div",{staticClass:"item"},[n("h4",[t._v(t._s(t.deviceCount))]),t._m(1)]),n("div",{staticClass:"item"},[n("h4",[t._v(t._s(t.householderCount))]),t._m(2)]),n("div",{staticClass:"item"},[n("h4",[t._v(t._s(t.tenantCount))]),t._m(3)])])]),t._m(4),n("h3",[t._v("重点关注人员进出记录")]),n("div",{staticClass:"record panel"},[n("div",{staticClass:"inner"},[t._m(5),n("div",{staticStyle:{height:"320px",overflow:"hidden"},attrs:{"class-option":t.recordDataStyle}},[n("vue-seamless-scroll",{attrs:{data:t.callData}},t._l(t.callData,(function(e,a){return n("div",{key:a,staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[n("div",{staticStyle:{width:"25vw",padding:"10px 0",color:"#68d8fe"}},[t._v(t._s(e.danger.name))]),n("div",{staticStyle:{width:"25vw",padding:"10px 0",color:"#68d8fe"}},[t._v(t._s(e.alert_type))]),n("div",{staticStyle:{width:"25vw",padding:"10px 0",color:"#68d8fe"}},[1==e.state?n("span",[t._v("未处理")]):t._e(),2==e.state?n("span",[t._v("已处理")]):t._e()]),n("div",{staticStyle:{width:"25vw",padding:"10px 0",color:"#68d8fe"}},[t._v(t._s(e.danger_type))])])})),0)],1)])])]),n("div",{staticClass:"column"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"map",attrs:{"element-loading-text":"加载地图中"}},[n("h3",[t._v("出租屋地图分布")]),n("div",{staticClass:"chart"},[n("div",{ref:"geo",attrs:{id:"geo"}})])])]),n("div",{staticClass:"column"},[n("div",{staticClass:"manage panel"},[n("div",{staticClass:"inner user"},[n("div",{staticClass:"operation"},[n("div",[n("span",{staticStyle:{color:"#68d8fe"}},[t._v(t._s(t.nowDate+" "+t.nowTime+" "+t.nowWeek))])])]),n("div",{staticClass:"image"},[n("img",{attrs:{src:a("8377"),alt:""}}),n("div",{staticClass:"name"},[t._v(t._s(t.username))]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.toManage}},[t._v("进入后台管理")])],1)])]),n("h3",[t._v("实时告警记录")]),n("div",{staticClass:"police panel"},[n("div",{staticClass:"inner"},[n("div",{staticStyle:{height:"600px",overflow:"hidden"}},[n("vue-seamless-scroll",{attrs:{data:t.recordData,"class-option":t.recordDataStyle}},t._l(t.recordData,(function(e,a){return n("div",{key:a,staticStyle:{display:"flex","justify-content":"center",color:"#fff",padding:"10px 0"}},[n("div",{staticStyle:{width:"20vw"}},[n("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[n("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:e.log.image}}),n("img",{staticStyle:{"max-width":"150px","max-height":"150px","margin-right":"10px"},attrs:{slot:"reference",src:e.log.image},slot:"reference"})])],1),n("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-between","margin-right":"10px",width:"80vw"}},[n("div",[n("span",{staticStyle:{color:"#68d8fe"}},[t._v("姓名: "+t._s(e.danger.name))])]),n("div",[n("span",[t._v("设备名: "+t._s(e.log.device_uuid))])]),n("div",[n("span",{staticStyle:{color:"#68d8fe"}},[t._v("抓拍地址: "+t._s(e.address))])]),n("div",[n("span",[t._v(" 抓拍时间: "+t._s(e.log.timestamp)+" ")])])])])})),0)],1)])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i",{staticClass:"icon-dot",staticStyle:{color:"#006cff"}}),t._v(" 出租屋数 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i",{staticClass:"icon-dot",staticStyle:{color:"#006cff"}}),t._v(" 设备总数 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i",{staticClass:"icon-dot",staticStyle:{color:"#006cff"}}),t._v(" 户主总数 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i",{staticClass:"icon-dot",staticStyle:{color:"#006cff"}}),t._v(" 租客总数 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"summary"},[a("div",{staticClass:"rent-people panel"},[a("div",{staticClass:"inner"},[a("div",{attrs:{id:"rents"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[a("div",{staticStyle:{width:"25vw",padding:"10px 0",color:"#fff"}},[t._v("姓名")]),a("div",{staticStyle:{width:"25vw",padding:"10px 0",color:"#fff"}},[t._v("告警类型")]),a("div",{staticStyle:{width:"25vw",padding:"10px 0",color:"#fff"}},[t._v("告警类型")]),a("div",{staticStyle:{width:"25vw",padding:"10px 0",color:"#fff"}},[t._v("告警类型")])])}],o=(a("4160"),a("ac1f"),a("5319"),a("159b"),a("365c")),r=a("c466"),s=(a("bc3a"),a("51e0")),c=a.n(s),l=[{lng:113.341355,lat:22.525103},{lng:113.341355,lat:22.525103}],u={data:function(){return{loading:!0,recordData:[],callData:[],deviceCount:"",CZWCount:"",XXCount:"",ZPDCount:"",householderCount:"",tenantCount:"",tenantMenCount:"",tenantWomenCount:"",nowDate:"",nowTime:"",nowWeek:"",username:localStorage.getItem("username"),rent:"总"}},computed:{recordDataStyle:function(){return{step:.7,hoverStop:!0}}},mounted:function(){this.getAlerts(),this.getData(),this.getDangerLogs(),this.currentTime()},methods:{toManage:function(){this.$router.replace("/alert")},currentTime:function(){setInterval(this.getDate,500)},getDate:function(){var t=this,e=(new Date).getFullYear(),a=(new Date).getMonth()+1,n=(new Date).getDate(),i=(new Date).getDay(),o=(new Date).getHours(),r=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes(),s=(new Date).getSeconds();switch(i){case 1:t.nowWeek="星期一";break;case 2:t.nowWeek="星期二";break;case 3:t.nowWeek="星期三";break;case 4:t.nowWeek="星期四";break;case 5:t.nowWeek="星期五";break;case 6:t.nowWeek="星期六";break;case 7:t.nowWeek="星期日"}t.nowTime=o+":"+r+":"+s,t.nowDate=e+"-"+a+"-"+n},getAlerts:function(){var t=this;o["a"].alert(1,30).then((function(e){t.callData=e.data,t.total=e.total}))},getDangerLogs:function(){var t=this;o["a"].dangerLogs(1,30).then((function(e){t.recordData=e.data,t.total=e.total,t.recordData.forEach((function(t){t.log.timestamp=r["a"].formatTime(t.log.timestamp,"Y-M-D h:m:s")}))}))},getData:function(){var t=this;console.log(1),o["a"].statistical().then((function(e){t.CZWCount=e.CZWCount,t.XXCount=e.XXCount,t.ZPDCount=e.ZPDCount,t.deviceCount=e.deviceCount,t.householderCount=e.householderCount,t.tenantCount=e.tenantCount,t.tenantMenCount=e.tenantMenCount,t.tenantWomenCount=e.tenantWomenCount,t.renterSummary()}));var e=["CZW"];o["a"].addressesMap(1,1e3,e).then((function(e){e.data.forEach((function(t){t.lat&&t.lng&&l.push({lat:t.lat,lng:t.lng,address:t.address})})),t.init(),t.loading=!1})).catch((function(e){t.loading=!1}))},getRowClass:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return"background-color: rgba(255, 255, 255, 0.05); color: #006cff"},getCellClass:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return"background-color: rgba(255, 255, 255, 0.05); color: #fff"},init:function(){console.log(2);var t=this,e=new c.a.LatLng(22.51595,113.3926),a=new c.a.Map("geo",{zoom:10,center:e,mapStyleId:"style2"}),n=new c.a.visualization.Dot({faceTo:"screen"}).addTo(a).setData(l);n.on("click",(function(e){e.detail.dot&&t.$message.success("当前点击地址为："+e.detail.dot.address)}))},renterSummary:function(){var t=this;t.$nextTick((function(){var e=t.$echarts.init(document.getElementById("rents")),a={title:{text:t.rent+"出租屋男女比例",textStyle:{fontSize:20,color:"#fff"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",bottom:0,right:40,data:[{name:"男",textStyle:{color:"#fff"}},{name:"女",textStyle:{color:"#fff"}}]},series:[{name:"男女比例",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"outside"},labelLine:{show:!1},itemStyle:{},data:[{value:t.tenantMenCount,name:"男",itemStyle:{color:"#006cff"}},{value:t.tenantWomenCount,name:"女",itemStyle:{color:"#ddd"}}]}]};e.setOption(a)}))}}},d=u,g=(a("ff0c"),a("2877")),p=Object(g["a"])(d,n,i,!1,null,"65130fae",null);e["default"]=p.exports},ff0c:function(t,e,a){"use strict";var n=a("0dce"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-2eb9360a.1605342205213.js.map