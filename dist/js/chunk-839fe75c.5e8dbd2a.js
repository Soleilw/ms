(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-839fe75c"],{"365c":function(e,t,a){"use strict";var n=a("be3b"),s=a("99b1"),r=a.n(s),i={aip:function(e){return n["a"].post(r.a.Aip,e)},delAip:function(e){return n["a"].delete(r.a.Aip,{id:e})},aips:function(e){return n["a"].get(r.a.Aips,{page:e})},apk:function(e){return n["a"].post(r.a.Apk,e)},apks:function(e){return n["a"].get(r.a.Apks,{page:e})},apkVersion:function(e){return n["a"].post(r.a.ApkVersion,e)},apkVersions:function(e,t){return n["a"].get(r.a.ApkVersions,{page:e,apk_id:t})},_apkVersions:function(e){return n["a"].get(r.a.ApkVersions,{id:e})},publishApk:function(e){return n["a"].post(r.a.PublishApk,e)},project:function(e){return n["a"].post(r.a.Project,e)},projects:function(e){return n["a"].get(r.a.Projects,{page:e})},address:function(e){return n["a"].post(r.a.Address,e)},addresses:function(e){return n["a"].get(r.a.Addresses,{page:e})},face:function(e){return n["a"].post(r.a.Face,e)},faces:function(e){return n["a"].get(r.a.Faces,{page:e})},device:function(e){return n["a"].post(r.a.Device,e)},devices:function(e){return n["a"].get(r.a.Devices,{page:e})},_devices:function(e,t,a){return n["a"].get(r.a.Devices,{direction:e,addresses:t,limit:a})},deviceLogs:function(e,t,a,s){return n["a"].get(r.a.DeviceLogs,{page:e,limit:t,uuid:a,type:s})},faceGroup:function(e){return n["a"].get(r.a.FaceGroup,{address_id:e})},uuid:function(e,t){return n["a"].get(r.a.Uuid,{page:e,limit:t})}};t["a"]=i},9523:function(e,t){function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e.exports=a},"99b1":function(e,t,a){var n,s=a("9523"),r=(n={Login:"/login",Password:"/password",Aip:"/aip",Aips:"/aips"},s(n,"Aip","/aip"),s(n,"RestoreAip","/restore/aip"),s(n,"Project","/project"),s(n,"Projects","/projects"),s(n,"Project","/project"),s(n,"RestoreProject","/restore/project"),s(n,"Address","/address"),s(n,"Addresses","/addresses"),s(n,"Address","/address"),s(n,"RestoreAddress","/restore/address"),s(n,"Face","/face"),s(n,"PassFace","/pass/face"),s(n,"Face","/face"),s(n,"Faces","/faces"),s(n,"Device","/device"),s(n,"Devices","/devices"),s(n,"Uuid","/unknown/devices"),s(n,"DeviceFaceGroup","/device/face/group"),s(n,"FaceGroup","/face/groups"),s(n,"DeviceLogs","/device/logs"),s(n,"Apk","/apk"),s(n,"Apks","/apks"),s(n,"ApkVersion","/apk/version"),s(n,"ApkVersions","/apk/versions"),s(n,"PublishApk","/publish/apk"),s(n,"UploadFace","/upload/face"),s(n,"ApiToken","/api/token"),n);e.exports=r},e766:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAPK=!0}}},[e._v("添加APK")])],1),a("el-table",{ref:"multipleTable",attrs:{data:e.tableDate}},[a("el-table-column",{attrs:{label:"名称",type:"selection",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"APKID",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"description",label:"描述",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleShowVersion(t.$index,t.row)}}},[e._v("查看版本")])]}}])})],1),a("el-dialog",{attrs:{title:"添加APK",visible:e.dialogAPK},on:{"update:visible":function(t){e.dialogAPK=t}}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"APK名字"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"APK描述"}},[a("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.newApk}},[e._v("添加")])],1)],1)],1)],1)]),a("el-dialog",{attrs:{title:"查看版本",visible:e.dialogShowVersion,modal:!1,width:"80% ","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogShowVersion=t}}},[a("div",[a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVersion=!0}}},[e._v("添加版本")])],1),a("el-dialog",{attrs:{title:"添加版本",visible:e.dialogVersion,"close-on-click-modal":!1,modal:!1},on:{"update:visible":function(t){e.dialogVersion=t}}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.versionForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"版本名字"}},[a("el-input",{model:{value:e.versionForm.version,callback:function(t){e.$set(e.versionForm,"version",t)},expression:"versionForm.version"}})],1),a("el-form-item",{attrs:{label:"上传版本"}},[a("el-upload",{ref:"upload",attrs:{action:"https://upload-z2.qiniup.com",limit:1,"before-upload":e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"on-progress":e.uploadProcess,data:e.versionData}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择包")])],1),!0===e.hasFile?a("el-progress",{attrs:{"text-inside":!0,"stroke-width":15,percentage:e.percentage}}):e._e()],1),a("el-form-item",{attrs:{label:"版本链接"}},[a("el-input",{model:{value:e.versionForm.href,callback:function(t){e.$set(e.versionForm,"href",t)},expression:"versionForm.href"}})],1),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.newApkVersion}},[e._v("添加")])],1)],1)],1)],1)]),a("el-table",{ref:"multipleTable",attrs:{data:e.versionTableData}},[a("el-table-column",{attrs:{label:"名称",type:"selection",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),a("el-table-column",{attrs:{prop:"apk_id",label:"APKID",align:"center"}}),a("el-table-column",{attrs:{prop:"version",label:"版本",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleSend(t.$index,t.row)}}},[e._v("发布")])]}}])})],1),a("el-dialog",{attrs:{title:"发布",visible:e.dialogSend,modal:!1},on:{"update:visible":function(t){e.dialogSend=t}}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.sendForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择类型"}},[a("el-select",{on:{change:e.typeChange},model:{value:e.sendForm.type,callback:function(t){e.$set(e.sendForm,"type",t)},expression:"sendForm.type"}},e._l(e.typeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),2===e.sendForm.type?a("div",[a("el-form-item",{attrs:{label:"选择地址"}},[a("div",{staticClass:"facebox"},e._l(e.addressList,(function(t,n){return a("div",{key:n},[a("el-checkbox-group",{staticClass:"facebox-item",model:{value:e.sendForm.addresses,callback:function(t){e.$set(e.sendForm,"addresses",t)},expression:"sendForm.addresses"}},[a("el-checkbox",{attrs:{label:t.id},on:{change:e.handleCheckAllAddress}},[e._v(e._s(t.address))])],1)],1)})),0)])],1):e._e(),3===e.sendForm.type?a("div",[a("el-form-item",{attrs:{label:"选择地址"}},[a("div",{staticClass:"facebox"},e._l(e.addressList,(function(t,n){return a("div",{key:n},[a("el-checkbox-group",{staticClass:"facebox-item",model:{value:e.sendForm.addresses,callback:function(t){e.$set(e.sendForm,"addresses",t)},expression:"sendForm.addresses"}},[a("el-checkbox",{attrs:{label:t.id},on:{change:e.handleCheckAllAddress}},[e._v(e._s(t.address))])],1)],1)})),0)])],1):e._e(),e.hasType?a("div",[a("el-form-item",{attrs:{label:"选择方向"}},[a("el-select",{on:{change:e.handleCheckeddirection},model:{value:e.form.direction,callback:function(t){e.$set(e.form,"direction",t)},expression:"form.direction"}},e._l(e.directionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"选择设备"}},[a("div",{staticClass:"facebox"},e._l(e.deviceList,(function(t,n){return a("div",{key:n},[a("el-checkbox-group",{staticClass:"facebox-item",model:{value:e.sendForm.devices,callback:function(t){e.$set(e.sendForm,"devices",t)},expression:"sendForm.devices"}},[a("el-checkbox",{attrs:{label:t.id}},[e._v(e._s(t.remark?t.remark:t.uuid))])],1)],1)})),0)])],1):e._e(),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.newSend}},[e._v("提交")])],1)],1)],1)],1)]),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentVersionPage,"page-size":10,layout:"prev, pager, next, jumper",total:e.totalVersionPage},on:{"current-change":e.handleCurrentVersionChange,"update:currentPage":function(t){e.currentVersionPage=t},"update:current-page":function(t){e.currentVersionPage=t}}})],1)],1)]),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:e.totalPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},s=[],r=(a("99af"),a("b0c0"),a("365c")),i=a("bc3a"),o=a.n(i),l={name:"gradems",data:function(){return{dialogAPK:!1,form:{name:"",description:""},dialogVersion:!1,tableDate:[],currentPage:1,totalPage:0,dialogShowVersion:!1,apkList:[],qiniuaddr:"https://tu.fengniaotuangou.cn",suffix:"",percentage:0,hasFile:"",versionData:{key:"",token:""},versionForm:{apk_id:"",version:"",href:""},dialogSend:!1,typeList:[{value:1,label:"全部设备"},{value:2,label:"按地址选择"},{value:3,label:"自定义"}],directionList:[{value:"out",name:"出"},{value:"in",name:"进"}],versionTableData:[],sendForm:{type:"",addresses:[],direction:"",devices:[],version_id:""},addressList:[],addresses:[],checkAll:!1,hasType:!1,deviceList:[],currentVersionPage:1,totalVersionPage:0}},mounted:function(){this.getApk(),this.getAddress(),this.getQiniuToken()},methods:{getAip:function(){var e=this;r["a"].aips(e.currentPage).then((function(t){e.apiList=t.data}))},getApk:function(){var e=this;r["a"].apks(e.currentPage).then((function(t){e.tableDate=t.data,e.totalPage=t.total}))},newApk:function(){var e=this,t=this;r["a"].apk(t.form).then((function(a){t.$message.success("提交成功"),e.getApk(),t.ApkForm=!1,t.currentPage=1,t.form={}}))},handleDel:function(){},handleShowVersion:function(e,t){var a=this;a.dialogShowVersion=!0,a.versionForm.apk_id=t.id,r["a"].apkVersions(a.currentPage,a.versionForm.apk_id).then((function(e){a.versionTableData=e.data,a.totalVersionPage=e.total}))},handleCurrentChange:function(e){var t=this;t.getApk()},newApkVersion:function(){var e=this;r["a"].apkVersion(e.versionForm).then((function(t){e.$message.success("提交成功"),e.handleShowVersion(),e.dialogVersion=!1,e.currentPage=1,e.form={}}))},handleSend:function(e,t){this.dialogSend=!0,this.sendForm.version_id=t.id},getAddress:function(){var e=this;r["a"].addresses(e.currentPage).then((function(t){e.addressList=t.data})),console.log(e.addressList)},typeChange:function(e){var t=this;console.log(t.sendForm.addresses),3===t.sendForm.type&&(t.hasType=!0,t.sendForm.addresses=[]),2===t.sendForm.type&&(t.sendForm.addresses=[])},handleCheckeddirection:function(e){var t=this;t.getDevice(e)},getDevice:function(e){var t=this;r["a"]._devices(e,t.sendForm.addresses,100).then((function(e){t.deviceList=e.data}))},newSend:function(){var e=this,t=this,a=t.sendForm.type;switch(a){case 1:var n={type:1};r["a"].publishApk(n).then((function(a){t.$message.success("发布成功"),e.dialogSend=!1}));break;case 2:var s={type:2,addresses:t.sendForm.addresses};r["a"].publishApk(s).then((function(a){t.$message.success("发布成功"),e.dialogSend=!1}));break;case 3:r["a"].publishApk(t.sendForm).then((function(a){t.$message.success("发布成功"),e.dialogSend=!1}))}},handleRemove:function(e,t){var a=this;a.hasFile=!1,a.percentage=0,a.versionForm.href=""},beforeAvatarUpload:function(e){var t=this;t.versionData.key="".concat(e.name)},handleAvatarSuccess:function(e,t){var a=this;a.versionForm.href="".concat(a.qiniuaddr,"/").concat(e.key),console.log(a.versionForm.href)},handleExceed:function(e,t){var a=this;a.$message.error("只能上传一个文件"),a.hasFile=!1,a.percentage=0,a.$refs.upload.clearFiles(),a.versionData.key="",a.versionForm.href=""},uploadProcess:function(e,t,a){var n=this;n.hasFile=!0,n.percentage=e.loaded/e.total*100|0},getQiniuToken:function(){var e=this;o.a.get("https://api.fengniaotuangou.cn/api/upload/token").then((function(t){e.versionData.token=t.data.uptoken}))},handleCurrentVersionChange:function(e){var t=this;t.getApkVersion()}}},c=l,d=a("2877"),u=Object(d["a"])(c,n,s,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-839fe75c.5e8dbd2a.js.map