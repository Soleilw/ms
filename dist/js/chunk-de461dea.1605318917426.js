(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-de461dea","chunk-2d225891"],{"131a":function(e,a,t){},"365c":function(e,a,t){"use strict";var n=t("be3b"),r=t("99b1"),i=t.n(r),o={aip:function(e){return n["a"].post(i.a.Aip,e)},delAip:function(e){return n["a"].del(i.a.Aip,{id:e})},aips:function(e,a){return n["a"].get(i.a.Aips,{page:e,limit:a})},apk:function(e){return n["a"].post(i.a.Apk,e)},apks:function(e,a){return n["a"].get(i.a.Apks,{page:e,limit:a})},apkVersion:function(e){return n["a"].post(i.a.ApkVersion,e)},apkVersions:function(e,a,t){return n["a"].get(i.a.ApkVersions,{page:e,limit:a,apk_id:t})},_apkVersions:function(e){return n["a"].get(i.a.ApkVersions,{id:e})},publishApk:function(e){return n["a"].post(i.a.PublishApk,e)},project:function(e){return n["a"].post(i.a.Project,e)},projects:function(e,a){return n["a"].get(i.a.Projects,{page:e,limit:a})},address:function(e){return n["a"].post(i.a.Address,e)},getaddress:function(e){return n["a"].get(i.a.Address,{id:e})},addresses:function(e,a,t,r,o){return n["a"].get(i.a.Addresses,{page:e,limit:a,project_id:t,area_id:r,address:o})},addressTypes:function(e,a){return n["a"].get(i.a.AddressTypes,{page:e,limit:a})},addressesMap:function(e,a,t){return n["a"].get(i.a.Addresses,{page:e,limit:a,type:t})},face:function(e){return n["a"].post(i.a.Face,e)},faces:function(e,a,t){return n["a"].get(i.a.Faces,{page:e,limit:a,name:t})},searchFace:function(e){return n["a"].post(i.a.SearchImageFace,e)},pushRecords:function(e,a,t,r){return n["a"].get(i.a.PushRecords,{page:e,limit:a,name:t,address:r})},pushRecordCommands:function(e){return n["a"].get(i.a.PushRecordCommands,{id:e})},againPush:function(e){return n["a"].post(i.a.PushRecord,e)},areas:function(e,a,t){return n["a"].get(i.a.Areas,{page:e,limit:a,parent_id:t})},area:function(e){return n["a"].post(i.a.Area,e)},device:function(e){return n["a"].post(i.a.Device,e)},_device:function(e){return n["a"].get(i.a.Device,{uuid:e})},devices:function(e,a,t,r,o,c,l){return n["a"].get(i.a.Devices,{page:e,limit:a,type:t,uuid:r,area_id:o,address_id:c,online:l})},_devices:function(e,a,t){return n["a"].get(i.a.Devices,{direction:e,addresses:a,limit:t})},deviceLogs:function(e,a,t,r){return n["a"].get(i.a.DeviceLogs,{page:e,limit:a,uuid:t,type:r})},deviceFaceLogs:function(e,a,t,r,o,c){return n["a"].get(i.a.DeviceRecord,{page:e,limit:a,uuid:t,search:r,area_id:o,address_id:c})},searchFaceLogs:function(e,a,t){return n["a"].get(i.a.DeviceRecord,{page:e,limit:a,faces:t})},deviceTypes:function(){return n["a"].get(i.a.DeviceTypes)},deviceHeart:function(e){return n["a"].get(i.a.DeviceHeartbeat,{uuid:e})},deviceCommands:function(e,a,t){return n["a"].get(i.a.DeviceCommands,{page:e,limit:a,uuid:t})},commandsType:function(e){return n["a"].get(i.a.Commands,{type:e})},sendDeviceCommand:function(e){return n["a"].post(i.a.SendDeviceCommand,e)},catchFace:function(e){return n["a"].get(i.a.CatchFaces,{id:e})},deviceUserList:function(e,a,t){return n["a"].get(i.a.DeviceUserList,{page:e,limit:a,uuid:t})},faceGroup:function(e){return n["a"].get(i.a.FaceGroup,{address_id:e})},uuid:function(e,a){return n["a"].get(i.a.Uuid,{page:e,limit:a})},dangerFace:function(e){return n["a"].post(i.a.DangerFace,e)},delDangerFace:function(e){return n["a"].del(i.a.DelDangerFace,{id:e})},dangerFaces:function(e,a){return n["a"].get(i.a.DangerFaces,{page:e,limit:a})},dangerLogs:function(e,a,t,r){return n["a"].get(i.a.DangerLogs,{page:e,limit:a,danger_id:t,address:r})},alert:function(e,a,t,r,o){return n["a"].get(i.a.DangerAlerts,{page:e,limit:a,state:t,search:r,dangers:o})},handleAlerts:function(e){return n["a"].post(i.a.HandleAlerts,{results:e})},dangerTypes:function(){return n["a"].get(i.a.DangerTypes,{})},roles:function(e,a){return n["a"].get(i.a.Roles,{page:e,limit:a})},oneRole:function(e){return n["a"].get(i.a.Role,{name:e})},role:function(e){return n["a"].post(i.a.Role,e)},users:function(e,a){return n["a"].get(i.a.Users,{page:e,limit:a})},user:function(e){return n["a"].post(i.a.User,e)},policeLevel:function(e){return n["a"].post(i.a.PoliceLevel,e)},policeLevels:function(e,a,t,r){return n["a"].get(i.a.PoliceLevels,{page:e,limit:a,level:t,parent_id:r})},policeman:function(e){return n["a"].post(i.a.Policeman,e)},policemen:function(e,a,t,r,o,c){return n["a"].get(i.a.Policemen,{page:e,limit:a,station_id:t,department_id:r,state:o,search:c})},audit:function(e){return n["a"].post(i.a.PassPoliceman,e)},policeStation:function(e){return n["a"].post(i.a.PoliceStation,e)},policeStations:function(e,a,t){return n["a"].get(i.a.PoliceStations,{page:e,limit:a,name:t})},information:function(e){return n["a"].post(i.a.Information,e)},informations:function(e,a,t,r){return n["a"].get(i.a.Information,{page:e,limit:a,id:t,title:r})},faceSwitch:function(e){return n["a"].post(i.a.FaceSwicth,e)},delFaceSwitch:function(e){return n["a"].del(i.a.FaceSwicth,{id:e})},faceSwitches:function(e,a){return n["a"].get(i.a.FaceSwicthes,{page:e,limit:a})},statistical:function(){return n["a"].get(i.a.Count)}};a["a"]=o},"5e23":function(e,a,t){"use strict";var n=t("131a"),r=t.n(n);r.a},"8d81":function(e,a,t){var n;(function(r){"use strict";function i(e,a){var t=(65535&e)+(65535&a),n=(e>>16)+(a>>16)+(t>>16);return n<<16|65535&t}function o(e,a){return e<<a|e>>>32-a}function c(e,a,t,n,r,c){return i(o(i(i(a,e),i(n,c)),r),t)}function l(e,a,t,n,r,i,o){return c(a&t|~a&n,e,a,r,i,o)}function s(e,a,t,n,r,i,o){return c(a&n|t&~n,e,a,r,i,o)}function u(e,a,t,n,r,i,o){return c(a^t^n,e,a,r,i,o)}function d(e,a,t,n,r,i,o){return c(t^(a|~n),e,a,r,i,o)}function f(e,a){var t,n,r,o,c;e[a>>5]|=128<<a%32,e[14+(a+64>>>9<<4)]=a;var f=1732584193,m=-271733879,p=-1732584194,g=271733878;for(t=0;t<e.length;t+=16)n=f,r=m,o=p,c=g,f=l(f,m,p,g,e[t],7,-680876936),g=l(g,f,m,p,e[t+1],12,-389564586),p=l(p,g,f,m,e[t+2],17,606105819),m=l(m,p,g,f,e[t+3],22,-1044525330),f=l(f,m,p,g,e[t+4],7,-176418897),g=l(g,f,m,p,e[t+5],12,1200080426),p=l(p,g,f,m,e[t+6],17,-1473231341),m=l(m,p,g,f,e[t+7],22,-45705983),f=l(f,m,p,g,e[t+8],7,1770035416),g=l(g,f,m,p,e[t+9],12,-1958414417),p=l(p,g,f,m,e[t+10],17,-42063),m=l(m,p,g,f,e[t+11],22,-1990404162),f=l(f,m,p,g,e[t+12],7,1804603682),g=l(g,f,m,p,e[t+13],12,-40341101),p=l(p,g,f,m,e[t+14],17,-1502002290),m=l(m,p,g,f,e[t+15],22,1236535329),f=s(f,m,p,g,e[t+1],5,-165796510),g=s(g,f,m,p,e[t+6],9,-1069501632),p=s(p,g,f,m,e[t+11],14,643717713),m=s(m,p,g,f,e[t],20,-373897302),f=s(f,m,p,g,e[t+5],5,-701558691),g=s(g,f,m,p,e[t+10],9,38016083),p=s(p,g,f,m,e[t+15],14,-660478335),m=s(m,p,g,f,e[t+4],20,-405537848),f=s(f,m,p,g,e[t+9],5,568446438),g=s(g,f,m,p,e[t+14],9,-1019803690),p=s(p,g,f,m,e[t+3],14,-187363961),m=s(m,p,g,f,e[t+8],20,1163531501),f=s(f,m,p,g,e[t+13],5,-1444681467),g=s(g,f,m,p,e[t+2],9,-51403784),p=s(p,g,f,m,e[t+7],14,1735328473),m=s(m,p,g,f,e[t+12],20,-1926607734),f=u(f,m,p,g,e[t+5],4,-378558),g=u(g,f,m,p,e[t+8],11,-2022574463),p=u(p,g,f,m,e[t+11],16,1839030562),m=u(m,p,g,f,e[t+14],23,-35309556),f=u(f,m,p,g,e[t+1],4,-1530992060),g=u(g,f,m,p,e[t+4],11,1272893353),p=u(p,g,f,m,e[t+7],16,-155497632),m=u(m,p,g,f,e[t+10],23,-1094730640),f=u(f,m,p,g,e[t+13],4,681279174),g=u(g,f,m,p,e[t],11,-358537222),p=u(p,g,f,m,e[t+3],16,-722521979),m=u(m,p,g,f,e[t+6],23,76029189),f=u(f,m,p,g,e[t+9],4,-640364487),g=u(g,f,m,p,e[t+12],11,-421815835),p=u(p,g,f,m,e[t+15],16,530742520),m=u(m,p,g,f,e[t+2],23,-995338651),f=d(f,m,p,g,e[t],6,-198630844),g=d(g,f,m,p,e[t+7],10,1126891415),p=d(p,g,f,m,e[t+14],15,-1416354905),m=d(m,p,g,f,e[t+5],21,-57434055),f=d(f,m,p,g,e[t+12],6,1700485571),g=d(g,f,m,p,e[t+3],10,-1894986606),p=d(p,g,f,m,e[t+10],15,-1051523),m=d(m,p,g,f,e[t+1],21,-2054922799),f=d(f,m,p,g,e[t+8],6,1873313359),g=d(g,f,m,p,e[t+15],10,-30611744),p=d(p,g,f,m,e[t+6],15,-1560198380),m=d(m,p,g,f,e[t+13],21,1309151649),f=d(f,m,p,g,e[t+4],6,-145523070),g=d(g,f,m,p,e[t+11],10,-1120210379),p=d(p,g,f,m,e[t+2],15,718787259),m=d(m,p,g,f,e[t+9],21,-343485551),f=i(f,n),m=i(m,r),p=i(p,o),g=i(g,c);return[f,m,p,g]}function m(e){var a,t="",n=32*e.length;for(a=0;a<n;a+=8)t+=String.fromCharCode(e[a>>5]>>>a%32&255);return t}function p(e){var a,t=[];for(t[(e.length>>2)-1]=void 0,a=0;a<t.length;a+=1)t[a]=0;var n=8*e.length;for(a=0;a<n;a+=8)t[a>>5]|=(255&e.charCodeAt(a/8))<<a%32;return t}function g(e){return m(f(p(e),8*e.length))}function h(e,a){var t,n,r=p(e),i=[],o=[];for(i[15]=o[15]=void 0,r.length>16&&(r=f(r,8*e.length)),t=0;t<16;t+=1)i[t]=909522486^r[t],o[t]=1549556828^r[t];return n=f(i.concat(p(a)),512+8*a.length),m(f(o.concat(n),640))}function b(e){var a,t,n="0123456789abcdef",r="";for(t=0;t<e.length;t+=1)a=e.charCodeAt(t),r+=n.charAt(a>>>4&15)+n.charAt(15&a);return r}function v(e){return unescape(encodeURIComponent(e))}function x(e){return g(v(e))}function k(e){return b(x(e))}function F(e,a){return h(v(e),v(a))}function y(e,a){return b(F(e,a))}function D(e,a,t){return a?t?F(a,e):y(a,e):t?x(e):k(e)}n=function(){return D}.call(a,t,a,e),void 0===n||(e.exports=n)})()},a51e:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"获取数据中"}},[t("div",{staticClass:"handle-box"},[t("div",{staticClass:"btn"},[t("el-button",{attrs:{type:"primary"},on:{click:e.searchFace}},[e._v("搜索人脸")])],1)]),t("el-dialog",{attrs:{title:"设置表格参数",visible:e.dialogExcel},on:{"update:visible":function(a){e.dialogExcel=a}}},[t("div",{staticClass:"box"},[t("el-form",{attrs:{model:e.excelForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"表格名字"}},[t("el-input",{attrs:{placeholder:"请输入表格名字"},model:{value:e.excelForm.name,callback:function(a){e.$set(e.excelForm,"name",a)},expression:"excelForm.name"}})],1),t("el-form-item",{attrs:{label:"设置条数"}},[t("el-input",{attrs:{placeholder:"请输入生成的数据条数"},model:{value:e.excelForm.number,callback:function(a){e.$set(e.excelForm,"number",a)},expression:"excelForm.number"}})],1),t("el-form-item",{attrs:{label:"请选择表头"}},[t("div",{staticClass:"facebox"},[t("el-checkbox-group",{on:{change:e.headChange},model:{value:e.excelForm.head,callback:function(a){e.$set(e.excelForm,"head",a)},expression:"excelForm.head"}},e._l(e.headList,(function(a,n){return t("div",{key:n,staticStyle:{display:"flex"}},[t("el-checkbox",{attrs:{label:a}},[e._v(e._s(a.label))])],1)})),0)],1)]),t("div",{staticClass:"submit"},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.exportToExcel}},[e._v("生成表格")])],1)],1)],1)],1)]),t("el-dialog",{attrs:{title:"设置搜索条件",visible:e.dialogDoubtable,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(a){e.dialogDoubtable=a},close:e.clearForm}},[t("div",{staticClass:"box"},[t("el-form",{attrs:{model:e.searchForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"相似度"}},[t("el-input",{attrs:{placeholder:"请输入相似度"},model:{value:e.searchForm.match_score,callback:function(a){e.$set(e.searchForm,"match_score",a)},expression:"searchForm.match_score"}})],1),t("el-form-item",{attrs:{label:"上传图片"}},[t("el-upload",{ref:"upload",attrs:{action:"https://upload-z2.qiniup.com",limit:1,"before-upload":e.beforeAvatarUpload,"auto-upload":!1,"on-success":e.handleAvatarSuccess,"on-exceed":e.handleExceed,data:e.imgData,"list-type":"picture-card"}},[e.searchForm.href?t("el-image",{staticStyle:{"max-width":"150px","max-height":"150px"},attrs:{src:e.form.face_image}}):t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择图片")])],1)],1),t("div",{staticClass:"submit"},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.newDoubtablet}},[e._v("搜索")])],1)],1)],1)],1)]),t("el-table",{attrs:{data:e.tableDate,border:"","header-cell-style":{background:"#f0f0f0",color:"#003366"},"max-height":"620"}},[t("el-table-column",{attrs:{prop:"id",label:"ID"}}),t("el-table-column",{attrs:{prop:"device.type",label:"设备类型"}}),t("el-table-column",{attrs:{prop:"remark",label:"设备地址"}}),t("el-table-column",{attrs:{prop:"face.name",label:"姓名"}}),t("el-table-column",{attrs:{prop:"number",label:"身份证"}}),t("el-table-column",{attrs:{prop:"time",label:"记录时间"}}),t("el-table-column",{attrs:{prop:"face.href",label:"人脸库照片"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{src:e.row.href}})]}}])}),t("el-table-column",{attrs:{prop:"image",label:"记录照片"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{src:e.row.image}})]}}])})],1),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,50,100,150,200,250,300],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(a){e.current=a},"update:current-page":function(a){e.current=a},"size-change":e.sizeChange}})],1)],1)},r=[],i=(t("99af"),t("c975"),t("baa5"),t("d81d"),t("b0c0"),t("365c")),o=t("8d81"),c=t.n(o),l=t("bc3a"),s=t.n(l),u={name:"gradems",data:function(){return{loading:!1,dialogDoubtable:!1,imgData:{key:"",token:""},fileList:[],imgList:[],fileName:"",suffix:"",qiniuaddr:"https://tu.fengniaotuangou.cn",activeName:"natureDoubtable",natureForm:{name:""},form:{href:"",name:"",number:"",notify_score:"",notify_user:""},searchForm:{image:"",match_score:""},tableDate:[],id:"",dialogDel:!1,current:1,size:10,total:0,dialogExcel:!1,excelForm:{number:"",head:[],name:""},headList:[{index:1,value:"id",label:"ID"},{index:2,value:"name",label:"设备类型"},{index:3,value:"notify_score",label:"设备地址"},{index:4,value:"notify_user",label:"姓名"},{index:5,value:"number",label:"身份证"},{index:6,value:"created_at",label:"记录时间"}],list:[],checkHead:[],checkParam:[]}},mounted:function(){this.getQiniuToken()},methods:{openExcel:function(){var e=this;e.dialogExcel=!0},order:function(e,a){return e.index<a.index?-1:e.index>a.index?1:e.index==a.index?0:void 0},headChange:function(e){var a=this;e.sort(this.order),console.log(e);for(var t=0;t<e.length;t++){if(-1==a.checkHead.indexOf(e[t].label))a.checkHead.push(e[t].label);else{a.checkHead=[];for(var n=0;n<e.length;n++)-1==a.checkHead.indexOf(e[n].label)&&a.checkHead.push(e[n].label)}if(-1==a.checkParam.indexOf(e[t].value))a.checkParam.push(e[t].value);else{a.checkParam=[];for(var r=0;r<e.length;r++)-1==a.checkParam.indexOf(e[r].value)&&a.checkParam.push(e[r].value)}}},exportToExcel:function(){var e=this;return e.excelForm.name?e.excelForm.number?e.excelForm.head.length?void i["a"].dangerFaces(e.current,e.excelForm.number).then((function(a){e.$message.success("正在生成表格"),e.list=a.data,e.excelForm={number:"",head:[],name:""},e.dialogExcel=!1,e.export2Excel()})):(e.$message.warning("请选择表头"),!1):(e.$message.warning("请设置数据条数"),!1):(e.$message.warning("请输入表格名字"),!1)},export2Excel:function(){var e=this;t.e("chunk-0ae87d26").then(function(){var a=t("8530"),n=a.export_json_to_excel,r=e.formatJson(e.checkParam,e.list);console.log(e.list),n(e.checkHead,r,e.excelForm.name)}.bind(null,t)).catch(t.oe)},formatJson:function(e,a){return a.map((function(a){return e.map((function(e){return a[e]}))}))},changeType:function(e){var a=this;switch(e){case 1:break;case 2:break;default:a.dialogDoubtable=!0}},searchFace:function(){var e=this;e.dialogDoubtable=!0,e.form={href:"",name:"",number:"",notify_score:"",notify_user:""}},beforeAvatarUpload:function(e,a){var t=this;console.log(e,a),t.fileName=c()(e.name),t.suffix=e.name.substring(e.name.lastIndexOf(".")+1),t.imgData.key="tmp_".concat(t.fileName,".").concat(t.suffix)},handleAvatarSuccess:function(e,a){var t=this;a.url="".concat(t.qiniuaddr,"/").concat(e.key),t.searchForm.image=a.url,i["a"].searchFace(t.searchForm).then((function(e){t.$message.success("提交成功"),i["a"].searchFaceLogs(1,10,e).then((function(a){t.$message.success("搜索成功"),t.tableDate=e.data,t.dialogDoubtable=!1,t.searchForm={},t.$refs.upload.clearFiles()})),t.dialogPolice=!1,t.searchForm={}}))},newDoubtablet:function(){this.$refs.upload.submit()},handleExceed:function(e,a){var t=this;t.$message.error("上传图片不能超过1张!重新上传"),t.$refs.upload.clearFiles(),t.searchForm.image="",t.imgData.key=""},clearForm:function(){this.$refs.upload.clearFiles()},handleDel:function(e,a){},getQiniuToken:function(){var e=this;s.a.get("https://api.fengniaotuangou.cn/api/upload/token").then((function(a){e.imgData.token=a.data.uptoken}))},currentChange:function(e){var a=this;a.loading=!0,a.current=e,i["a"].dangerFaces(e,a.size).then((function(e){a.loading=!1,a.tableDate=e.data,a.total=e.total})).catch((function(e){a.loading=!1}))},sizeChange:function(e){var a=this;a.loading=!0,a.size=e,i["a"].dangerFaces(a.current,e).then((function(e){a.loading=!1,a.tableDate=e.data,a.total=e.total})).catch((function(e){a.loading=!1}))}}},d=u,f=(t("5e23"),t("2877")),m=Object(f["a"])(d,n,r,!1,null,"6fb6f9e9",null);a["default"]=m.exports},baa5:function(e,a,t){var n=t("23e7"),r=t("e58c");n({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},c975:function(e,a,t){"use strict";var n=t("23e7"),r=t("4d64").indexOf,i=t("a640"),o=t("ae40"),c=[].indexOf,l=!!c&&1/[1].indexOf(1,-0)<0,s=i("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:l||!s||!u},{indexOf:function(e){return l?c.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},e58c:function(e,a,t){"use strict";var n=t("fc6a"),r=t("a691"),i=t("50c4"),o=t("a640"),c=t("ae40"),l=Math.min,s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),f=c("indexOf",{ACCESSORS:!0,1:0}),m=u||!d||!f;e.exports=m?function(e){if(u)return s.apply(this,arguments)||0;var a=n(this),t=i(a.length),o=t-1;for(arguments.length>1&&(o=l(o,r(arguments[1]))),o<0&&(o=t+o);o>=0;o--)if(o in a&&a[o]===e)return o||0;return-1}:s}}]);
//# sourceMappingURL=chunk-de461dea.1605318917426.js.map